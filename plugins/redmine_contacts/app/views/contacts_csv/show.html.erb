<h2><%= l(:label_contacts_csv_import) %></h2>
<%= form_tag url_for({:action => 'load', :project_id => @project}), :multipart => true do  %>
	<div class = "box tabular"> 
		<p><label><%= l(:label_contacts_upload_encoding)%></label>
			<%= select_tag "encoding", "<option value=\"U\">UTF8</option><option value=\"EUC\">EUC</option><option value=\"S\">SJIS</option><option value=\"N\">None</option>".html_safe %></p>

		<p><label><%=l(:label_contacts_csv_separator)%></label>
		<%= text_field_tag :col_sep, ',', {:size => 3, :maxlength => 1}%></p>
	
		<p><label><%= l(:label_contacts_csv_file) %></label>
			<%= file_field_tag :csv_file, :accept => "text/csv" %></p>
		<div>
		  <p id="add_tags">
			<label><%= l(:field_add_tags) %></label>
				<script type="text/javascript">
				  $(function(){
				      var currentTags = ['<%= Contact.available_tags(:project => @project).map(&:name).join("\',\'").html_safe %>'];

				      $('#add_tag_list').tagit({
				          availableTags: currentTags,
				          allowSpaces: true,
				          placeholderText: "<%= l(:label_add_tag) %>",
				          caseSensitive: false,
				          removeConfirmation: true
				      });


				  });
				</script>
			<%= text_field_tag 'add_tag_list', "import-#{Time.now.strftime('%Y-%m-%d-%H:%M:%S')}", :label => :field_contact_tag_names, :size => 10 %>
		  </p>

		</div>	
	</div>
	
	<%= submit_tag l(:button_apply) -%>
<% end %>

<% content_for :header_tags do %>
  <%= javascript_include_tag :"tag-it", :plugin => 'redmine_contacts'  %>
  <%= stylesheet_link_tag :"jquery.tagit.css", :plugin => 'redmine_contacts' %>  
  <%= javascript_include_tag :contacts, :plugin => 'redmine_contacts'  %>
  <%= stylesheet_link_tag :contacts, :plugin => 'redmine_contacts' %>
<% end %>
